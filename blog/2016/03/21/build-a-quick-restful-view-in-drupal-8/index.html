
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Build a quick RESTful View in Drupal 8 - KevinBlanco.io</title>
  <meta name="author" content="Kevin Blanco">

  
  <meta name="description" content="api, drupal, drupal8, rest, views Build a Quick RESTful View in Drupal 8 Drupal 8 is the new version of Drupal that actually came out just a couple &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://kevinblanco.github.io/blog/2016/03/21/build-a-quick-restful-view-in-drupal-8">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/styles.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/feed.xml" rel="alternate" title="KevinBlanco.io" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/jquery.sidr.min.js"></script>
  <script src="/javascripts/ah-blue.js"></script>
  
  

</head> 

<body   >
  <div class="aux-container">
    <a id="nav-toggle" href="#sidr"></a>
    <a id="search-toggle"></a>
</div>

<header class="header-container clearfix">
        <a href="/"><img src="/images/ah-frame.svg" onerror="this.onerror=null; this.src='ah-frame.png'"></a>
        <h1>KevinBlanco.io</h1>
        <h5>Drupal Certified Specialist and Activist. Javascript Enthusiasts and Entrepreneur</h5>
</header>

  <div class="main-container">
    <div class="main wrapper clearfix">
    	
    	<aside>
			
			  	<div class="search-container">
					<form action="http://google.com/search" method="get">
						<fieldset role="search">
							<input type="hidden" name="q" value="site:blog.alexharr.is" />
							<input class="search-field" type="text" name="q" results="0" placeholder=""/>
							<input class="submit" type="submit" value=""/>
						</fieldset>
					</form>
				</div>
			
		  <div id="main-nav">
    <nav>

        <h2><strong>Acquia Drupal Certified Front-End Specialist</strong></h2> 
        <a href="https://www.drupal.org/user/1349878"><img src="/images/front-end.png"></a>

        <hr>
        <h2><strong>Acquia Drupal Certified Site Builder</strong></h2> 
        <a href="https://www.drupal.org/user/1349878"><img src="/images/site-building.png"></a>
        
        <hr>
        <h2><strong>Drupal Association Member</strong></h2> 
        <a href="https://www.drupal.org/user/1349878"><img src="/images/member.png"></a>
        <ul>
        	<li>
        		
					

<h1>Recent Posts</h1>
<ul>
	
    <li>
    	<a href="/blog/2016/03/23/drupal-views-the-power-of-contextual-filters/">Drupal Views: The Power of Contextual Filters</a>
    </li>
    
    <li>
    	<a href="/blog/2016/03/21/build-a-quick-restful-view-in-drupal-8/">Build a Quick RESTful View in Drupal 8</a>
    </li>
    
</ul>
<hr>
<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/kevinblanco">@kevinblanco</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'kevinblanco',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<hr>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/kevinblanco?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



				
        	</li>
        	<li>

            <h1>Connect with me</h1>
        		<ul>
                    <li>Github - <a href="http://www.github.com/kevinblanco" target="_blank">github.com/kevinblanco</a></li>
                    <li>Twitter - <a href="http://www.twitter.com/KevinBlancoZ" target="_blank">@KevinBlancoZ</a></li>
                    <li>Email - <a href="mailto:mail@kevinblanco.io" target="_blank">mail@kevinblanco.io</a></li>
                    <li>Costa Rica JS Community - <a href="http://www.meetup.com/costaricajs/" target="_blank">Meetup Group</a></li>
                    <li>Brainstation <a href="http://www.brainstation.io/city/san-jose" target="_blank">Costa Rica</a></li>
                    <li>Drupal <a href="https://groups.drupal.org/costa-rica" target="_blank">Costa Rica</a></li>
                    <li>Drupal.org <a href="https://www.drupal.org/user/1349878" target="_blank">Profile</a></li>
        		</ul
           
        	</li>
        </ul>
    </nav>
</div>
		</aside>
		
      <div>
<article>
	<header>
  <div class="article-tags">
      

<span class="categories">
  
    <a class='category' href='/blog/categories/api/'>api</a>, <a class='category' href='/blog/categories/drupal/'>drupal</a>, <a class='category' href='/blog/categories/drupal8/'>drupal8</a>, <a class='category' href='/blog/categories/rest/'>rest</a>, <a class='category' href='/blog/categories/views/'>views</a>
  
</span>


  </div>
  
    <h1>
      Build a Quick RESTful View in Drupal 8
    </h1>
  
</header>

  <section><hr />

<p>Drupal 8 is the new version of Drupal that actually came out just a couple of months ago and which development phase started at 2011, so it brings a lot of new chages to the table including <a href="http://symfony.com/blog/symfony2-meets-drupal-8">Symphony components</a>, <a href="https://www.drupal.org/theme-guide/8/twig">Twig as the template engine</a> and many <a href="https://www.drupal.org/8">other cool stuff</a>.</p>

<p>One of the new changes added to Drupal8 is that Views module is now <a href="https://www.drupal.org/node/1912118">part of the core</a>, which is something that makes a lot of sense, since Views is part of pretty much all Drupal sites.</p>

<p>With RESTful Web Services also in Core, we now have all the tools we need to create highly customizable solutions out of the box in regards to RESTful services.</p>

<p>In this blog post, I will show you how to create a view that returns a list of cars (content-type) in JSON via the REST API. Let’s get started!</p>

<p>First you need a Drupal 8 installation, if you don&rsquo;t have one, it&rsquo;s very easy to get up and running using <a href="https://drupalconsole.com/">Drupal Console</a>&rsquo;s command <code>$ drupal site:new</code> or if you prefer a more visual way, you can download and use <a href="https://www.acquia.com/downloads">Acquia&rsquo;s Dev Desktop</a> and use the wizard to create a new site.</p>

<h1>Activate required modules</h1>

<p>For our little example, we will need to activate Drupal Core&rsquo;s <strong>RESTful Web Services</strong> and <strong>Serialization</strong> modules. To do this go to <strong><em>Extend</em></strong> and find/activate the modules mentioned above. Also make sure that <strong>Views</strong> and <strong>Views UI</strong> are enabled (they usually are by default).</p>

<p><img src="/images/modules.png"></p>

<h1>Create the content type</h1>

<p>I want a service that returns a list of cars in sale in JSON format, so Drupal will take care of managing the content, and on a later post i&rsquo;m currently working on, we&rsquo;ll consume the API with Angular2.</p>

<p>Let&rsquo;s create a new content type called <code>Car</code> and add some fields for <code>Price</code>, <code>Photo</code>, <code>Brand</code>, <code>Model</code> and <code>Type</code>.  Go to <strong><em>Structure > Content Types > Add Content Type</em></strong> and fill the requested fields. For the <code>Title</code> field label it as <code>Name</code>. Here&rsquo;s a picture of how my content type looks:
<img src="/images/content_type.png"></p>

<p>Now, we might want to create a few cars before we create the service so we have content to return. Also you can use the <a href="https://www.drupal.org/project/devel">Devel</a> to generate &ldquo;Dummy&rdquo; content for testing. If you are using Drupal Console just use <code>$ drupal module:download devel</code> and then <code>$ drupal module:install devel</code>. Then just go to <strong><em>Configuration > Development > Generate content</em></strong>, and create a bunch of cars.</p>

<h1>Creating the view</h1>

<p>Now let’s create our view. Go to <strong><em>Structure > Views > Add new view</em></strong>. Name it <code>Cars</code> and select <code>Cars</code> in the <strong>type</strong> selector.  We do not need to create a page or block, so uncheck those options to keep things simple and check <code>Provide a REST export</code> and define the path you wich the API respond to, in my case <code>api/cars/view</code>.
<img src="/images/view_setup.png"></p>

<p>After you hit <code>Save and edit</code> you will be prompted with a regular Drupal View UI, the only difference is that the output will be JSON. As any other View, you can control access by role, use contextual filters, sorting, etc. By default, you will see all the data for every car, including metadata. You might want to pick the fields you wish to send on the JSON response by switching to <code>Show: Fields</code> in the <strong>FORMAT</strong> section. Now you can select all the fields you want to display on the <strong>FIELDS</strong> section, in my case I selected <code>Title</code>, <code>Brand</code>, <code>Price</code>, <code>Type</code>, <code>Photo</code>, and <code>Body</code>(description).
<img src="/images/view-final.png"></p>

<p>You can view your results in the path we defined when we created the view, im my case is <code>api/cars</code>. I have a LIVE example in the following URL: <code>http://dev-cars-api.pantheonsite.io/api/cars</code>. Right now as i&rsquo;m writing this post looks like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[{
</span><span class='line'>  "name": "Toyota Prado",
</span><span class='line'>  "brand": "Toyota",
</span><span class='line'>  "price": "$30000.00",
</span><span class='line'>  "type": "4X4",
</span><span class='line'>  "photo": "http://dev-cars-api.pantheonsite.io/sites/default/files/styles/large/public/2016-03/download.jpeg?itok=3QRT2liF",
</span><span class='line'>  "description": "New version, full extras. brand new"
</span><span class='line'>}, {
</span><span class='line'>  "name": "Toyota Vitz",
</span><span class='line'>  "brand": "Toyota",
</span><span class='line'>  "price": "$7500.00",
</span><span class='line'>  "type": "Sedan",
</span><span class='line'>  "photo": "http://dev-cars-api.pantheonsite.io/sites/default/files/styles/large/public/2016-03/Toyota_Yaris_front_20080104.jpg?itok=uJMZTbHm",
</span><span class='line'>  "description": "Small and compact, cheap and fast"
</span><span class='line'>}, {
</span><span class='line'>  "name": "Land Rover Defender",
</span><span class='line'>  "brand": "Land Rover",
</span><span class='line'>  "price": "$15000.00",
</span><span class='line'>  "type": "4X4",
</span><span class='line'>  "photo": "http://dev-cars-api.pantheonsite.io/sites/default/files/styles/large/public/2016-03/L550_15ACC_EXT_LOC02_V1_04__293-111196_500x330.jpg?itok=w5Gud-8b",
</span><span class='line'>  "description": "A great car in great conditions, it only has 4000miles and new whells"
</span><span class='line'>}, {
</span><span class='line'>  "name": "Mitsubishi Montero Sport",
</span><span class='line'>  "brand": "Mitsubishi",
</span><span class='line'>  "price": "$10000.00",
</span><span class='line'>  "type": "4X4",
</span><span class='line'>  "photo": "http://dev-cars-api.pantheonsite.io/sites/default/files/styles/large/public/2016-03/1342471999-2000_Mitsubishi_Montero_Sport_0.JPG?itok=91O63bRS",
</span><span class='line'>  "description": "Beautiful 4x4u00a0Mitsubishi Montero Sport 99' model for 7 passengers"
</span><span class='line'>}]</span></code></pre></td></tr></table></div></figure>


<p>You might be wondering how I changed the labels of each field so it doesn&rsquo;t display like <code>field_photo</code> for example? Well it&rsquo;s quite simple, just click in the <strong>field settings</strong> located at the <strong>FORMAT</strong> section, and you will be able to define an alias for each field.</p>

<p><img src="/images/alias.png"></p>

<p><strong>And that&rsquo;s it!</strong> We have our endpoint returning the cars data as JSON and we can consume it wherever we want. If you have any questions shoot me a comment, a tweet or an email.</p>
</section>



	
	  <section class="comments">
	    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
	  </section>
	
</article>
</div>

    </div>
  </div>
  <footer class="main-footer">
	<section class="interior-footer">
		<span class="credit">Please share, copy, extend and criticise any of the content find on this blog</span>
	</section>
</footer>


  


<script type="text/javascript">
      var disqus_shortname = 'kevinblanco-io';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://kevinblanco.github.io/blog/2016/03/21/build-a-quick-restful-view-in-drupal-8/';
        var disqus_url = 'http://kevinblanco.github.io/blog/2016/03/21/build-a-quick-restful-view-in-drupal-8/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
